<div layout="row" layout-align="start center">
  <h2 class="md-headline">{{ submitReportCtrl.name }} 목장 리포트 : {{ submitReportCtrl.reportTitle() }}</h2>
  <a ng-href="https://docs.google.com/spreadsheets/d/{{submitReportCtrl.reportSpreadSheetId}}"><img src="logo_sheets_32px.png" width="24px" height="24px"></a>
</div>
<div ng-if="submitReportCtrl.memberData && submitReportCtrl.storedReport">
  <md-switch ng-model="submitReportCtrl.prayerMode">기도제목만 보기</md-switch>
  <md-tabs md-dynamic-height>
    <md-tab id="report">
      <md-tab-label>리포트 작성</md-tab-label>
      <md-tab-body>
         <md-card ng-repeat="member in submitReportCtrl.memberData">
           <md-card-title>
             <md-card-title-text>
               <span class="md-headline">{{ member.name }}</span>
             </md-card-title-text>
           </md-card-title>
           <md-card-content>
             <md-list>
<md-list-item>
<p>출석</p>
              <md-button class="md-icon-button" ng-repeat="status in submitReportCtrl.memberStatus" aria-label="attendance status">
                <md-icon ng-if="status.materialIconClass" class="material-icons" ng-click="member.status = $index" aria-label="Send Email" ng-style="member.statusIconColor($index)">{{status.materialIconClass}}</md-icon>
                <md-icon ng-if="status.svgSrc" md-svg-src="{{status.svgSrc}}" ng-click="member.status = $index" aria-label="Send Email" ng-style="member.statusIconColor($index)"></md-icon>
              </md-button>
</md-list-item>
<md-list-item>
<md-input-container style="width: 100%">
<label>기도 제목</label>
                <textarea elastic ng-model="member.prayer" layout-fill flex></textarea>
</md-input-container>
</md-list-item>
<md-list-item>
<md-input-container style="width: 100%">
<label>메모 (결석 사유 및 특별한 일 등등...)</label>
                <textarea elastic ng-model="member.note" layout-fill flex></textarea>
</md-input-container>
</md-list-item>

           </md-card-content>
         </md-card>
          <div layout="column" layout-fill>
          <md-input-container>
            <label>목장 노트</label>
            <textarea elastic ng-model="submitReportCtrl.groupNote" rows="3">{{submitReportCtrl.groupNote}}</textarea>
          </md-input-container>
          </div>
      </md-tab-body>
    </md-tab>
    <md-tab id="attendance">
      <md-tab-label>출석</md-tab-label>
      <md-tab-body>
        <md-list>
          <md-list-item ng-repeat="member in submitReportCtrl.memberData">
            <p>{{member.name}}</p>
            <md-button class="md-icon-button" ng-repeat="status in submitReportCtrl.memberStatus" aria-label="attendance status">
              <md-icon ng-if="status.materialIconClass" class="material-icons" ng-click="member.status = $index" aria-label="Send Email" ng-style="member.statusIconColor($index)">{{status.materialIconClass}}</md-icon>
              <md-icon ng-if="status.svgSrc" md-svg-src="{{status.svgSrc}}" ng-click="member.status = $index" aria-label="Send Email" ng-style="member.statusIconColor($index)"></md-icon>
            </md-button>
          </md-list-item>
        </md-list>
      </md-tab-body>
   </md-tab>
    <md-tab id="prayer">
      <md-tab-label>기도제목</md-tab-label>
      <md-tab-body>
        <table md-table>
          <thead md-head md-order="submitReportCtrl.groupsOrder">
            <tr>
              <th md-column md-order-by="name">이름</th>
              <th md-column>기도제목</th>
            </tr>
          </thead>
          <tbody md-body>
            <tr ng-repeat="member in submitReportCtrl.memberData | orderBy: submitReportCtrl.groupsOrder">
              <td md-cell align="center">{{ member.name }}</td>
            <td md-cell align="left" style="padding: 0 5px 0 0">
              <textarea elastic ng-model="member.prayer" layout-fill flex></textarea>
            </td>
            </tr>
          </tbody>
        </table>
      </md-tab-body>
    </md-tab>
    <md-tab id="prayer">
      <md-tab-label>기도제목 공유</md-tab-label>
      <md-tab-body>
        <div ng-repeat="member in submitReportCtrl.memberData">
          <span ng-if="member.prayer" style="word-wrap: break-word;">
            {{ member.name }} : {{ member.prayer }} <br />
          </span>
        </div>
      </md-tab-body>
    </md-tab>
    <md-tab id="memo">
      <md-tab-label>메모 (결석 사유 및 특별한 일 등등...)</md-tab-label>
      <md-tab-body>
        <table md-table>
          <thead md-head md-order="submitReportCtrl.groupsOrder">
            <tr>
              <th md-column md-order-by="name">이름</th>
              <th md-column>메모</th>
            </tr>
          </thead>
          <tbody md-body>
            <tr ng-repeat="member in submitReportCtrl.memberData | orderBy: submitReportCtrl.groupsOrder">
              <td md-cell align="center">{{ member.name }}</td>
            <td md-cell align="left" style="padding: 0 5px 0 0">
              <textarea elastic ng-model="member.note" layout-fill flex></textarea>
            </td>
            </tr>
          </tbody>
        </table>
      </md-tab-body>
    </md-tab>
  </md-tabs>
  <div layout=column layout-fill>
    <md-button class="md-raised md-primary" type="submit" ng-click="submitReportCtrl.submitReport()" flex>
    저장 
    </md-button>
  </div>
</div>
<div ng-if="!submitReportCtrl.memberData || !submitReportCtrl.storedReport">
  <md-progress-circular md-mode="indeterminate"></md-progress-circular>
</div>

